<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="None">
        
        
        <link rel="shortcut icon" href="img/favicon.ico">
        <title>My Docs</title>
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <link href="css/fontawesome.min.css" rel="stylesheet">
        <link href="css/brands.min.css" rel="stylesheet">
        <link href="css/solid.min.css" rel="stylesheet">
        <link href="css/v4-font-face.min.css" rel="stylesheet">
        <link href="css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body class="homepage">
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href=".">My Docs</a>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#unidad-3-practica-1-instalacion-de-tomcat-y-mava-para-despliegue-de-aplicacion-java" class="nav-link">Unidad 3 - Práctica 1. Instalación de Tomcat y Mava para despliegue de aplicación Java</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#instalacion-y-configuracion-de-tomcat" class="nav-link">Instalación y configuración de Tomcat</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#despliegue-con-tomcat" class="nav-link">Despliegue con Tomcat</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#instalacion-y-configuracion-de-maven" class="nav-link">Instalación y configuración de Maven</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#despliegue-con-maven" class="nav-link">Despliegue con Maven</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#aplicacion-de-prueba" class="nav-link">Aplicación de prueba</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#despliegue-de-aplicacion-java" class="nav-link">Despliegue de aplicación Java</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
            
            <li class="nav-item" data-bs-level="1"><a href="#cuestiones-finales" class="nav-link">Cuestiones finales</a>
              <ul class="nav flex-column">
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="unidad-3-practica-1-instalacion-de-tomcat-y-mava-para-despliegue-de-aplicacion-java">Unidad 3 - Práctica 1. Instalación de Tomcat y Mava para despliegue de aplicación Java</h1>
<p>Para la realización de esta práctica es necesario como prerequisito la instalación 
de una máquina virtual con Debian 11 "Bullseye". También es apropiado descargar, 
instalar y configurar herramientas útiles como <strong>ufw</strong> y <strong>openssh-server</strong>, que además 
de ser útiles en el trabajo con máquinas que actúan como servidores, serán necesarias 
para conectar mediante SSH a nuestra máquina anfitriona con la máquina virtual.</p>
<h1 id="instalacion-y-configuracion-de-tomcat">Instalación y configuración de Tomcat</h1>
<p>Permitimos la escucha a través del puerto 8080 (es el puerto que Tomcat usa por defecto): </p>
<pre><code class="language-console">sudo ufw allow 8080
</code></pre>
<p>Instalamos Java y Tomcat:</p>
<pre><code class="language-console">sudo apt install openjdk-11-jdk
sudo apt install tomcat9
</code></pre>
<p>Creamos un grupo y usuario específicos para Tomcat en nuestra máquina e iniciamos el 
servicio:</p>
<pre><code class="language-console">sudo groupadd tomcat9;
sudo useradd -s /bin/false -g tomcat9 -d /etc/tomcat9 tomcat9;

sudo systemctl start tomcat9;
</code></pre>
<p>A continuación será preciso modificar el archivo /etc/tomcat9/tomcat-users.xml, 
agregando las siguientes líneas para añadir a un usuario administrador a Tomcat: </p>
<p><img alt="Configuración Tomcat" src="images/conf_tomcat.png" /></p>
<p>A continuación podemos acceder a Tomcat desde el puerto 8080 de la IP de la MV 
(en mi caso, 192.168.0.25:8080): </p>
<p><img alt="Tomcat funciona" src="images/tomcat_funciona.png" /></p>
<p>Ahora debemos instalar el paquete 'tomcat9-admin', que se encarga de administrar 
las aplicaciones web de Tomcat:</p>
<pre><code class="language-console">sudo apt install tomcat9-admin
</code></pre>
<p>Y podremos acceder al gestor de aplicaciones web indicando el nombre y clave de 
usuarios que anteriormente añadimos a la configuración de Tomcat en la MV. Esta 
vez, es necesario indicar que accedemos al recurso alojado en /manager/html (
es decir, 192.168.0.25:8080/manager/html, en mi caso particular):</p>
<p><img alt="Tomcat Web Manager" src="images/tomcat_manager.png" /></p>
<p>También podemos acceder al gestor de MV de Tomcat indicando igualmente usuario 
y clave (esta vez desde 192.168.0.25:8080/host-manager/html):</p>
<p><img alt="Tomcat Host Manager" src="images/tomcat_host_manager.png" /></p>
<h1 id="despliegue-con-tomcat">Despliegue con Tomcat</h1>
<p>Una vez configurado Tomcat, podemos desplegar una aplicación indicando un archivo 
con extensión '.war': </p>
<p><img alt="Subir war" src="images/subida_war.png" /></p>
<p>Ahora, en el apartado "Aplicaciones", podremos encontrar la aplicación que hemos 
desplegado y acceder a ella desde la ruta que viene indicada. En mi caso, la 
aplicación se encuentra en '/sample'. Accediendo a ella: </p>
<p><img alt="Aplicación desplegada" src="images/sample_desplegada.png" /></p>
<h1 id="instalacion-y-configuracion-de-maven">Instalación y configuración de Maven</h1>
<p>Para instalar Maven sólo hace falta ejecutar:</p>
<pre><code class="language-console">sudo apt install maven
</code></pre>
<p>Ahora tendremos que volver a modificar el archivo de configuración 
'/etc/tomcat9/tomcat-users.xml' para añadir el rol de 'manager-script' y un nuevo 
usuario con tal rol, que debe ser diferente al usuario que ya habíamos creado en 
la instalación y configuración de Tomcat. En mi caso, el archivo ha quedado tal que:</p>
<p><img alt="Nueva configuración Tomcat" src="images/cambio_conf_tomcat.png" /></p>
<p>Además, también tendremos que especificar esta información en el archivo de configuración 
/etc/maven/settings.xml, dentro del bloque 'servers':</p>
<p><img alt="Configuración Maven" src="images/conf_maven.png" /></p>
<h1 id="despliegue-con-maven">Despliegue con Maven</h1>
<h2 id="aplicacion-de-prueba">Aplicación de prueba</h2>
<p>Para realizar el despliegue, utilizaré una aplicación de prueba en primer lugar. Primero, 
ejecuto:</p>
<pre><code class="language-console">mvn archetype:generate -DgroupId=alberto -DartifactId=aplicacion-prueba -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false
</code></pre>
<p>Ahora, en el proyecto del directorio 'aplicacion-prueba/' que hemos generado, modificamos 
el archivo 'pom.xml'. En el bloque 'build' se añaden las siguientes líneas: </p>
<pre><code class="language-xml">&lt;build&gt;
        &lt;finalName&gt;aplicacion-prueba&lt;/finalName&gt; 
        &lt;plugins&gt; 
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;
                &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;2.2&lt;/version&gt;
                &lt;configuration&gt;
                &lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt; 
                &lt;server&gt;Tomcat.P.3.1&lt;/server&gt; 
                &lt;path&gt;/myapp&lt;/path&gt; 
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>Tras lo cual ejecutamos:</p>
<pre><code class="language-console">mvn tomcat7:deploy
</code></pre>
<p>Y si todo está correcto, Maven debe arrojar un mensaje "BUILD SUCCESS". Al volver a 
Tomcat ("ip_servidor:8080/manager" si accedemos desde la máquina anfitriona o 
"localhost:8080/manager" si accedemos desde la MV del servidor), encontraremos nuestra 
aplicación desplegada:</p>
<p><img alt="Aplicación de prueba desplegada" src="images/prueba_despliegue_mvn.png" /></p>
<h2 id="despliegue-de-aplicacion-java">Despliegue de aplicación Java</h2>
<p>Ahora que hemos comprobado que el despliegue puede realizarse correctamente sin errores, 
podemos realizar el despliegue de una aplicación real de Java. Para ello, podemos clonar 
una aplicación desde GitHub con:</p>
<pre><code class="language-console">git clone https://github.com/cameronmcnz/rock-paper-scissors.git
git checkout patch-1
# En el caso de este proyecto, debemos posicionarnos en la rama 'patch-1'
</code></pre>
<p>De nuevo, modificamos el archivo 'pom.xml' y le agregamos el mismo bloque 'plugin' del 
caso anterior. Volvemos a ejecutar el despliegue y si entramos a Tomcat podremos 
encontrar la aplicación lista:</p>
<p><img alt="Aplicacion lista en Tomcat" src="images/tomcat_aplicacion.png" /></p>
<p>Y podremos acceder desde la ruta a la aplicación:</p>
<p><img alt="Aplicación desplegada" src="images/aplicacion_desplegada.png" /></p>
<h1 id="cuestiones-finales">Cuestiones finales</h1>
<p>Las contraseñas que maneja Tomcat se almacenan como texto plano ya que para el acceso a bases de datos, 
Tomcat necesita las contraseñas originales. Incluso si la contraseña fuese encriptada, como Tomcat es 
de código abierto, un posible atacante conocerá los métodos de encriptación y desencriptación de Tomcat, 
por lo que no existiría una seguridad efectiva en este sentido.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = ".",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="js/base.js"></script>
        <script src="search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>

<!--
MkDocs version : 1.6.1
Build Date UTC : 2024-11-14 14:33:50.321997+00:00
-->
